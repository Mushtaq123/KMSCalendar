<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="KMSCalendar.Views.NewClassPage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Create a new class"
             BackgroundColor="{DynamicResource NavigationBackgroundLight}">

    <ContentPage.Content>
        <StackLayout>
            <StackLayout Orientation="Vertical"
                         VerticalOptions="CenterAndExpand"
                         Margin="0,50,0,50"
                         Spacing="0">

                <Frame VerticalOptions="CenterAndExpand"
                       Margin="20,0,20,0"
                       BackgroundColor="{DynamicResource NavigationBackground}"
                       CornerRadius="10">

                    <ScrollView BackgroundColor="Transparent">
                        <!--  contents go here  -->
                        <!--  Enter a name  -->
                        <Frame Grid.Row="5">
                            <Grid>

                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="32" />
                                    <RowDefinition Height="32" />
                                    <RowDefinition Height="300" />
                                    <RowDefinition Height="50" />
                                    <RowDefinition Height="32" />
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <Button x:Name="BackButton"
                                        HorizontalOptions="Start"
                                        Style="{StaticResource ActionButtonStyle}"
                                        Text="Back"
                                        Clicked="BackButton_Clicked" />

                                <Button x:Name="NextButton"
                                        Grid.Column="1"
                                        HorizontalOptions="End"
                                        Style="{StaticResource ActionButtonStyle}"
                                        Text="Next"
                                        Clicked="NextButton_Clicked" />

                                <Label Grid.Row="1"
                                       Text="Class Name:" />

                                <Entry x:Name="ClassNameEntry"
                                       Grid.Row="1"
                                       Grid.Column="1"
                                       Text="{Binding ClassName}"
                                       Placeholder="Class Name" />

                                <!--  Select a period  -->
                                <Label Grid.Row="2"
                                       Text="Period: " />

                                <StackLayout Grid.Row="2"
                                             Grid.Column="1"
                                             Orientation="Horizontal">

                                    <Label x:Name="NewPeriodLabel"
                                           VerticalOptions="Center"
                                           BindingContext="{x:Reference Name=PeriodStepper}"
                                           Text="{Binding Value}" />

                                    <Stepper x:Name="PeriodStepper"
                                             HorizontalOptions="Center"
                                             VerticalOptions="CenterAndExpand"
                                             Increment="1"
                                             Maximum="15"
                                             Minimum="0"
                                             Value="{Binding Period}" />
                                </StackLayout>

                                <!--  Search for a Teacher  -->
                                <StackLayout x:Name="SearchAreaStackLayout"
                                             Grid.Row="3"
                                             Grid.ColumnSpan="2"
                                             HorizontalOptions="Center">

                                    <Label Text="Search for your Teacher" />

                                    <SearchBar x:Name="TeacherSearchBar"
                                               Margin="0,0,0,4"
                                               Text="{Binding SearchTerm}"
                                               Placeholder="Search"
                                               TextChanged="TeacherSearchBar_TextChanged" />

                                    <ListView x:Name="TeachersListView"
                                              ItemsSource="{Binding Teachers}"
                                              IsPullToRefreshEnabled="true"
                                              ItemSelected="TeachersListView_ItemSelected">

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <ViewCell Height="100">
                                                    <Grid Padding="5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>

                                                        <Label Text="{Binding Name}"
                                                               FontSize="14"
                                                               LineBreakMode="NoWrap" />

                                                        <Label Grid.Column="1"
                                                               HorizontalOptions="End"
                                                               Text="School"
                                                               FontSize="11"
                                                               LineBreakMode="NoWrap" />
                                                    </Grid>
                                                </ViewCell>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>
                                </StackLayout>

                                <Label Grid.Row="4"
                                       Grid.Column="0"
                                       VerticalOptions="Center"
                                       Text="Add a new teacher (if not on the list):" />
                                <Entry x:Name="newTeacherNameEntry"
                                       Grid.Row="4"
                                       Grid.Column="1"
                                       VerticalOptions="Center"
                                       Text="{Binding TeacherName}"
                                       Placeholder="Teacher's Name" />

                                <Button x:Name="DoneButton"
                                        Grid.Row="5"
                                        Grid.ColumnSpan="2"
                                        Margin="0,5,0,0"
                                        BackgroundColor="{DynamicResource NavigationTertiary}"
                                        BorderWidth="0"
                                        CornerRadius="10"
                                        Text="Add the class"
                                        TextColor="White"
                                        Clicked="DoneButton_Clicked" />
                            </Grid>
                        </Frame>
                    </ScrollView>
                </Frame>
            </StackLayout>
        </StackLayout>
    </ContentPage.Content>
</ContentPage>